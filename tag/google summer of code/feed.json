{
    "version": "https://jsonfeed.org/version/1",
    "title": "The Workshop",
    "subtitle": "",
    "icon": "https://the-m3chanic.github.io/images/favicon.ico",
    "description": "",
    "home_page_url": "https://the-m3chanic.github.io",
    "items": [
        {
            "id": "https://the-m3chanic.github.io/2024/08/25/GSoC-Final-Report/",
            "url": "https://the-m3chanic.github.io/2024/08/25/GSoC-Final-Report/",
            "title": "GSoC - Final Report",
            "date_published": "2024-08-25T11:41:29.000Z",
            "content_html": "<p><img data-src=\"/images/post_images/GSoC-Final-Report/GSoC-logo.png\" alt=\"gsoc logo\" /></p>\n<h1 id=\"gsoc-24-final-project-report\"><a class=\"anchor\" href=\"#gsoc-24-final-project-report\">#</a> GSoC '24 - Final Project Report</h1>\n<p>The following report summarises the work I have done during Google Summer of Code 2024, along with the results, scope for improvements and future work. This also serves as the final project report with all the contributions.</p>\n<table>\n<thead>\n<tr>\n<th><strong>Basic Info</strong></th>\n<th><strong>Details</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Name</strong></td>\n<td>Suraj Kumar</td>\n</tr>\n<tr>\n<td><strong>Email</strong></td>\n<td><span class=\"exturl\" data-url=\"bWFpbHRvOmhpc3VyYWprdW1hcjIwMDRAZ21haWwuY29t\">hisurajkumar2004@gmail.com</span></td>\n</tr>\n<tr>\n<td><strong>Gitlab</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRsYWIucnRlbXMub3JnL3RoZS5tM2NoYW5pYw==\">the.m3chanic</span></td>\n</tr>\n<tr>\n<td><strong>LinkedIn</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubGlua2VkaW4uY29tL2luL3RoZS1tM2NoYW5pYy8=\">the-m3chanic</span></td>\n</tr>\n<tr>\n<td><strong>Twitter/X</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly94LmNvbS90aGVfbTNjaGFuaWNf\">the-m3chanic</span></td>\n</tr>\n<tr>\n<td><strong>University</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYW1yaXRhLmVkdS9jYW1wdXMvYW1yaXRhcHVyaS8=\">Amrita Vishwa Vidyapeetham, Amritapuri</span></td>\n</tr>\n<tr>\n<td><strong>Organization</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnRlbXMub3Jn\">RTEMS Project</span></td>\n</tr>\n<tr>\n<td><strong>Project Title</strong></td>\n<td>Add Python initializer to GDB in RTEMS</td>\n</tr>\n<tr>\n<td><strong>Project Link</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRsYWIucnRlbXMub3JnL3J0ZW1zLw==\">RTEMS Project Repository</span></td>\n</tr>\n<tr>\n<td><strong>Project Tracker</strong></td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRsYWIucnRlbXMub3JnL2dyb3Vwcy9ydGVtcy8tL2VwaWNzLzE=\">RTEMS Project Tracker</span></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"note-the-work-done-during-the-course-of-this-project-the-code-i-have-written-can-be-found-here\"><a class=\"anchor\" href=\"#note-the-work-done-during-the-course-of-this-project-the-code-i-have-written-can-be-found-here\">#</a> <strong>Note: The work done during the course of this Project (the code I have written), can be found <a href=\"#work-completed\">here</a></strong></h2>\n<h2 id=\"background\"><a class=\"anchor\" href=\"#background\">#</a> Background</h2>\n<p>My journey into Open Source began with a modest contribution — a documentation fix for a tool I was using. I encountered some build issues, realized that a few steps in the instructions were incorrect, and submitted a PR to correct them. It wasn’t until later that I fully grasped the impact of that contribution. Knowing that my small fix could help others avoid the same frustration gave me a sense of fulfillment.</p>\n<p>I discovered RTEMS while exploring organizations participating in GSoC 2024. As I browsed through the list of projects, one in particular caught my eye — tagged with  <code>GDB</code>  and  <code>Python</code> . Given my background in Reverse Engineering, I was immediately drawn to it and knew I wanted to make it my project. When I received my GSoC acceptance email on May 2nd, during my 2nd year in Undergrad College, I knew this summer was going to be something special. I had heard a lot about the mentor-mentee model that GSoC champions and was eager to experience it firsthand.</p>\n<h2 id=\"about-the-project\"><a class=\"anchor\" href=\"#about-the-project\">#</a> About the Project</h2>\n<p><img data-src=\"/images/post_images/GSoC-Final-Report/RTEMS-logo.png\" alt=\"rtems logo\" /></p>\n<p>RTEMS (Real-Time Executive for Multiprocessor Systems) is an open-source real-time operating system (RTOS) designed for embedded systems requiring high reliability and deterministic behavior.</p>\n<p>RTEMS provides the capability to build custom toolchains tailored to various target architectures, leveraging standard tools like GCC, Binutils, GDB and many more. These tools are essential for compiling, linking and debugging embedded applications on RTEMS.</p>\n<p>The project involved modifying the <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zb3VyY2V3YXJlLm9yZy9nZGIv\">GNU Debugger (GDB)</span> to enhance its debugging capabilities within RTEMS.</p>\n<h2 id=\"problem-statement\"><a class=\"anchor\" href=\"#problem-statement\">#</a> Problem Statement</h2>\n<p>GDB includes built-in support for automatically loading Python, but this feature is limited to dynamic executables. In such cases, when a specific library is loaded by the object file in GDB, the linker triggers GDB to load the corresponding pretty-printing scripts for that library.</p>\n<p>However, RTEMS is fully statically linked, and this automatic loading does not apply to statically linked executables. Without a linker to notify GDB when a library is loaded, Python is not automatically loaded. As a result, many features that rely on Python are unavailable, leading to a significant loss in functionality during debugging.</p>\n<h2 id=\"project-goals\"><a class=\"anchor\" href=\"#project-goals\">#</a> Project Goals</h2>\n<ul>\n<li>Integrate a Python initializer into GDB for RTEMS to facilitate enhanced debugging.</li>\n<li>Enable GDB to automatically load pretty-printing scripts for RTEMS structures and libstdcxx classes.</li>\n<li>Seamlessly integrate these changes into the RTEMS toolchain, reducing the need for involvement from the user.</li>\n</ul>\n<h2 id=\"approach\"><a class=\"anchor\" href=\"#approach\">#</a> Approach</h2>\n<p>A brief summary of my approach is as follows:</p>\n<ul>\n<li><strong>Initial Exploration:</strong> I began by reviewing existing solutions employed by companies like Rust and AdaCore, which typically involve adding a wrapper over the host GDB to resolve paths for pretty-printers. To gain deeper insights, I engaged in discussions with developers from both companies as well as with GDB developers to understand the rationale behind this approach. However, I found this method unsuitable for RTEMS due to its use of a distinct toolchain for each build, separate from the host toolchain. Additionally, the wrapper approach proved to be generally inefficient for our needs.</li>\n<li><strong>Implemented Solution:</strong> I introduced a .debug_gdb_scripts section to every ELF binary. This was done by adding the section in the  <code>cpukit/sapi/src/exinit.c</code>  file, since it is linked to every application built on RTEMS. As a result, every RTEMS-built application now includes this section.</li>\n<li><strong>Python script execution:</strong> This new executable section contains a snippet of Python code that corrects paths and triggers GDB to run a script called <span class=\"exturl\" data-url=\"aHR0cDovL3BwcmludGVyLnB5\">pprinter.py</span>. This script is responsible for registering both libstdcxx and RTEMS pretty-printers.</li>\n<li><strong>Toolchain Integration:</strong> The <span class=\"exturl\" data-url=\"aHR0cDovL3N0ZGN4eC5weQ==\">stdcxx.py</span> script, which registers the  <code>libstdcxx</code>  pretty-printers, needs to know the version of GCC being used since the pretty-printer scripts provided by GCC vary with versions. Therefore, the script is built alongside the toolchain to ensure compatibility.</li>\n<li><strong>RTEMS Pretty-Printer Registration:</strong> Finally, the <span class=\"exturl\" data-url=\"aHR0cDovL3BwcmludGVyLnB5\">pprinter.py</span> script invokes a build function from rtems_pprinter.py, which registers all the RTEMS-specific pretty-printers.</li>\n</ul>\n<p>Here is a flow chart highlighting the work flow underwent for the entire project:</p>\n<p><img data-src=\"/images/post_images/GSoC-Final-Report/project-flowchart.png\" alt=\"project flow chart\" /></p>\n<p>(Note: The boxes in Blue signify changes that apply to every application being built now on, and Yellow boxes signify changes to supporting scripts and updates to the build process)</p>\n<h2 id=\"work-completed\"><a class=\"anchor\" href=\"#work-completed\">#</a> <strong>Work Completed</strong></h2>\n<p><strong>NOTE: These are the Merge Requests I made, all of which have gotten approved and merged to the upstream branch</strong></p>\n<h3 id=\"python-initializer-for-gdb\"><a class=\"anchor\" href=\"#python-initializer-for-gdb\">#</a> Python Initializer for GDB</h3>\n<ul>\n<li><a href=\"https://gitlab.rtems.org/rtems/rtos/rtems/-/merge_requests/98\"><strong>Merge Request !98 in RTOS</strong></a>: Implemented a custom section  <code>.debug_gdb_scripts</code>  in RTEMS executables for GDB to load Python scripts automatically.</li>\n<li>Developed and tested integration with the RTEMS build system to ensure Python scripts are executed upon loading an application.</li>\n</ul>\n<h3 id=\"pretty-printers-integration\"><a class=\"anchor\" href=\"#pretty-printers-integration\">#</a> Pretty-Printers Integration</h3>\n<ul>\n<li><a href=\"https://gitlab.rtems.org/rtems/tools/rtems-tools/-/merge_requests/26\"><strong>MR !26 in Tools</strong></a>: Added support for pretty-printers for RTEMS-specific data structures.</li>\n<li><a href=\"https://gitlab.rtems.org/rtems/tools/rtems-tools/-/merge_requests/26\"><strong>MR !26 in Tools</strong></a>: Created a script  <code>pprinter.py</code>  to enhance GDB's ability to display RTEMS structures in a user-friendly format.</li>\n</ul>\n<h3 id=\"integration-with-rtems-toolchain\"><a class=\"anchor\" href=\"#integration-with-rtems-toolchain\">#</a> Integration with RTEMS Toolchain</h3>\n<ul>\n<li><a href=\"https://gitlab.rtems.org/rtems/tools/rtems-source-builder/-/merge_requests/35\"><strong>MR !35 in RSB</strong></a> and <a href=\"https://gitlab.rtems.org/rtems/tools/rtems-source-builder/-/merge_requests/48\"><strong>MR !48 in RSB</strong></a>: Modified the RTEMS Source Builder (RSB) to include the necessary changes for building  <code>stdcxx.py</code>  with the latest GCC.</li>\n<li><a href=\"https://gitlab.rtems.org/rtems/docs/rtems-docs/-/merge_requests/43\"><strong>MR !43 in Docs</strong></a>: Updated documentation to reflect new features and usage instructions.</li>\n</ul>\n<h2 id=\"current-state\"><a class=\"anchor\" href=\"#current-state\">#</a> Current State</h2>\n<ul>\n<li>All major features have been implemented and tested.</li>\n<li>Python initialization and pretty-printer support have been integrated into the RTEMS build system.</li>\n<li>Pretty-printers for some basic RTEMS score structures have been written and tested.</li>\n<li>The Documentation has been updated with the changes made to GDB, and on setting up a debugging environment for embedded debugging.</li>\n</ul>\n<h2 id=\"communication-and-work-management\"><a class=\"anchor\" href=\"#communication-and-work-management\">#</a> Communication and Work Management</h2>\n<ul>\n<li>Discord was the primary platform of communication between my mentors and I, along with other members of the community.</li>\n<li>Weekly meetings to discuss Status Updates and keep everyone up to date with the project.</li>\n<li>The RTEMS Gitlab instance was used to coordinate issues, tickets, and Merge Request discussions, along with engineering discussions on Discord.</li>\n</ul>\n<h2 id=\"future-scope-for-the-project\"><a class=\"anchor\" href=\"#future-scope-for-the-project\">#</a> Future Scope for the Project</h2>\n<ul>\n<li>Add more RTEMS pretty-printer to support the feature for a larger number of Structures and Objects.</li>\n<li>Create a new class of RTEMS GDB commands (which would again, be automatically loaded and set up with no work from the User's perspective).</li>\n<li>Extending the RTEMS Documentation further to add Debugging manuals for different debuggers, and eventually add RTEMS-specific GDB commands.</li>\n</ul>\n<h2 id=\"challenges-faced-and-things-learned\"><a class=\"anchor\" href=\"#challenges-faced-and-things-learned\">#</a> Challenges Faced and Things Learned</h2>\n<h3 id=\"challenges\"><a class=\"anchor\" href=\"#challenges\">#</a> Challenges:</h3>\n<h4 id=\"integrating-python-and-gdb-with-static-linking-in-rtems\"><a class=\"anchor\" href=\"#integrating-python-and-gdb-with-static-linking-in-rtems\">#</a> Integrating Python and GDB with Static Linking in RTEMS</h4>\n<ul>\n<li>RTEMS uses static linking, which complicates GDB's ability to automatically load Python scripts, a feature that works for dynamically linked executables. This required developing a <a href=\"#approach\">custom solution</a> to ensure Python scripts could be executed within the RTEMS environment.</li>\n</ul>\n<h4 id=\"developing-a-custom-solution-for-script-loading\"><a class=\"anchor\" href=\"#developing-a-custom-solution-for-script-loading\">#</a> Developing a Custom Solution for Script Loading</h4>\n<ul>\n<li>The conventional methods for loading Python scripts in GDB did not apply to RTEMS. I had to devise a new method to introduce a  <code>.debug_gdb_scripts</code>  section in RTEMS executables.</li>\n</ul>\n<h3 id=\"things-learned\"><a class=\"anchor\" href=\"#things-learned\">#</a> Things Learned:</h3>\n<h4 id=\"adaptability-and-problem-solving\"><a class=\"anchor\" href=\"#adaptability-and-problem-solving\">#</a> Adaptability and Problem-Solving</h4>\n<ul>\n<li>I learned to adapt to unexpected challenges, such as implementing a novel solution for integrating Python into GDB for RTEMS. This required creativity and persistence, especially when initial approaches did not work.</li>\n<li>Developed a stronger ability to think outside the box and approach problems from different angles.</li>\n</ul>\n<h4 id=\"effective-communication\"><a class=\"anchor\" href=\"#effective-communication\">#</a> Effective Communication</h4>\n<ul>\n<li>Regular communication with mentors and team members was crucial. Coordinating through platforms like Discord and GitLab helped me understand the importance of clear, consistent updates and feedback.</li>\n<li>Enhanced skills in articulating ideas and progress effectively, which is vital for collaborative work.</li>\n</ul>\n<h4 id=\"time-management\"><a class=\"anchor\" href=\"#time-management\">#</a> Time Management</h4>\n<ul>\n<li>Balancing the demands of GSoC with other commitments required careful planning and prioritization. Managing a project with defined milestones and deadlines improved my time management skills.</li>\n<li>Improved ability to set realistic goals, manage deadlines, and handle multiple tasks efficiently.</li>\n</ul>\n<h4 id=\"project-ownership-and-responsibility\"><a class=\"anchor\" href=\"#project-ownership-and-responsibility\">#</a> Project Ownership and Responsibility</h4>\n<ul>\n<li>Taking ownership of the project from inception to completion underscored the importance of responsibility. Ensuring that my contributions were valuable and well-documented was a crucial aspect of this.</li>\n</ul>\n<h4 id=\"feedback-and-iteration\"><a class=\"anchor\" href=\"#feedback-and-iteration\">#</a> Feedback and Iteration</h4>\n<ul>\n<li>Receiving and acting on feedback was essential for refining my work. Iterative improvement based on input from my mentors helped me produce better results.</li>\n</ul>\n<h2 id=\"note-of-thanks\"><a class=\"anchor\" href=\"#note-of-thanks\">#</a> Note of Thanks</h2>\n<p>This project would not have seen its successful completion without the ongoing support of many people. I would specially like to thank:</p>\n<ul>\n<li><strong>Christian Mauderer</strong> and <strong>Chris Johns</strong>: For being fantastic mentors who were always ready to help me, and were patient with me (even with things I was initially clueless about). They have been with me from the very start and continue to support me.</li>\n<li><strong>Joel Sherrill</strong>, <strong>Gedare Bloom</strong> and <strong>Amar Takhar</strong>: For being awesome maintainers and helping me along the way in more ways than I can recollect - not just regarding my project but also discussions outside it.</li>\n<li>My mentors and peers at <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iaTBzLmlu\">team bi0s</span> - specifically my mentor <span class=\"exturl\" data-url=\"aHR0cHM6Ly94LmNvbS9hbXVuX3JoYQ==\">AmunRha</span> - for inspiring me to try out GSoC and encouraging me throughout.</li>\n<li>My family, for their selfless support.</li>\n</ul>\n<h2 id=\"footnotes\"><a class=\"anchor\" href=\"#footnotes\">#</a> Footnotes</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdW1tZXJvZmNvZGUud2l0aGdvb2dsZS5jb20vcHJvZ3JhbXMvMjAyNC9wcm9qZWN0cy9adGVmUzlHTQ==\">Project Selection link</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xVmVTLVFDSnY1SFVFNHBVVThqSi1PcXBZU3ZuZmZwWmNsWEY3S2JLR3FBdy9lZGl0P3VzcD1zaGFyaW5n\">Proposal</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRsYWIucnRlbXMub3JnL2dyb3Vwcy9ydGVtcy8tL2VwaWNzLzE=\">Project Tracker (Gitlab Epic)</span></li>\n</ul>\n",
            "tags": [
                "GSoC",
                "Embedded",
                "GDB",
                "Google Summer of Code",
                "RTEMS"
            ]
        }
    ]
}